# 更新日志

## 最新改进（2025年8月）

### 新增功能

#### 1. 动态筛选条件检查器 (`dynamic_match`)
- **功能描述**：支持根据任务描述动态提取筛选条件并验证相应操作
- **应用场景**：特别适用于电商类任务、选票类，如"销量最高"、"价格最低"等条件的验证
- **配置示例**：
  ```yaml
  dynamic_match:
    extract_from: task_description
    condition_patterns:
      sales_highest:
        trigger_keywords: ["销量最高", "销量最多", "销量"]
        verify_keywords: ["销量", "最高", "最多"]
        llm_prompt: "该步骤是否执行了按销量排序的操作？"
  ```

#### 2. 完善的escalate策略
- **优先检查顺序**：`text` → `regex` → `action` → `ui/icons` → `ocr` → `llm`

#### 3. 增强的轨迹数据支持
- **目录格式**：支持包含截图、XML、动作记录的完整轨迹目录
- **多模态验证**：LLM验证时支持同时传入当前帧和下一帧的截图
- **上下文丰富**：每帧包含任务描述、推理过程、动作信息等完整上下文

### 测试改进


#### 测试覆盖
- **淘宝trace 1、2**:   淘宝搜索商品
- **淘宝trace 3**:      价格最低的Type-C数据线筛选验证
- **淘宝trace 4**:      销量最高的苹果充电线筛选验证  
- **淘宝trace 5**:      销量最高的Type-C数据线筛选验证
- **淘宝trace 6 7 8**

### 框架改进

#### 通用性提升
- **避免硬编码**：动态检查器不包含特定业务逻辑，完全依赖配置驱动
- **模式扩展**：支持任意数量的条件模式，易于扩展新的筛选类型
- **灵活验证**：支持多种验证字段组合，适应不同数据格式

#### 配置增强
- **后备策略**：当基础匹配失败时自动使用LLM后备验证

### 兼容性
- **向后兼容**：所有原有功能保持完全兼容
- **渐进采用**：新功能可以逐步集成，不影响现有配置
- **扩展友好**：框架设计支持未来的功能扩展

## 2025念8月14日

- **OCR引擎**： 加入了OCR引擎，支持对图片文字处理
- **xml辅助**： 在ocr不可用时，若对应的trace中有xml文件，可直接提取xml中所有的文本，用于关键词匹配
- **条件模式映射**：支持复杂的条件-验证关键词映射
- **待增加**：  下一步将增加图标元素的辅助识别（ui），实现更准确、迅速的本地关键步骤识别