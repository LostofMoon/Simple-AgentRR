task_id: fliggy_query_hotel_price
app_id: com.taobao.trip
task_type: query
description: 在飞猪应用中，根据用户指定的任意地标，查询并展示附近的酒店价格列表。
nodes:
- id: launch_app
  name: 启动飞猪应用
  condition:
    type: escalate
    params:
      ocr:
        any: ["首页", "我的", "消息", "酒店", "机票", "火车票"]
      llm:
        prompt: 请判断当前界面是否为飞猪应用的首页或主界面？
        expected_true: true
  next: [navigate_to_hotel_search]
- id: navigate_to_hotel_search
  name: 进入酒店搜索功能
  condition:
    type: escalate
    params:
      ocr:
        any: ["酒店", "民宿", "客栈"]
      llm:
        prompt: 请判断用户是否已经点击并进入了酒店搜索功能的主界面？
        expected_true: true
  next: [input_destination]
- id: input_destination
  name: 输入目的地或关键字
  condition:
    type: escalate
    params:
      ocr:
        any: ["目的地", "位置", "关键字", "想住哪儿", "城市/地标/酒店名"]
      llm:
        prompt: 请判断用户是否正在输入或已经输入了任务描述中要求的目的地（如地标、城市等）？
        expected_true: true
  next: [initiate_search]
- id: initiate_search
  name: 设置日期并开始搜索
  condition:
    type: escalate
    params:
      ocr:
        any: ["入住", "离店", "选择日期", "查询", "搜索", "查找酒店"]
      llm:
        prompt: 请判断用户是否已经完成了目的地输入，并点击了'查询'或'搜索'按钮来查找酒店？
        expected_true: true
  next: [view_hotel_list]
- id: view_hotel_list
  name: 查看酒店价格列表
  condition:
    type: juxtaposition
    params:
      ocr:
        any: ["价格", "筛选", "¥", "评分", "每晚", "综合排序", "酒店列表"]
      llm:
        prompt: 请判断当前界面是否成功展示了符合任务要求的酒店列表，列表中应包含多个酒店名称、价格（带有¥符号）和评分等信息？
        expected_true: true
success:
  any_of: [view_hotel_list]
