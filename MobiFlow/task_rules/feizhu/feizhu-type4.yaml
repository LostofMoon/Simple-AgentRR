task_id: fliggy_query_hotel_price
app_id: com.taobao.trip
task_type: travel_query
description: 在飞猪应用中，根据用户指定的城市和地标，查询附近的酒店及其价格。
nodes:
- id: launch_app
  name: 启动飞猪应用
  condition:
    type: escalate
    params:
      ocr:
        any: ["酒店", "机票", "火车票", "我的", "首页", "去哪玩"]
      llm:
        prompt: 当前屏幕是否为飞猪应用的首页或主界面？
        expected_true: true
  next: [enter_hotel_module]
- id: enter_hotel_module
  name: 进入酒店搜索模块
  deps: [launch_app]
  condition:
    type: escalate
    params:
      ocr:
        any: ["酒店", "民宿", "目的地", "入住", "离店", "关键词", "位置", "品牌"]
      llm:
        prompt: 用户是否已经进入了酒店搜索功能的界面，该界面包含目的地输入、日期选择等元素？
        expected_true: true
  next: [input_destination_and_dates]
- id: input_destination_and_dates
  name: 输入目的地并选择日期
  deps: [enter_hotel_module]
  condition:
    type: escalate
    params:
      ocr:
        any: ["选择目的地", "城市/地标", "入住", "离店", "选择日期", "日历", "确定", "完成"]
      llm:
        prompt: 用户是否正在输入目的地或在日历界面上选择入住和离店日期？
        expected_true: true
  next: [view_hotel_results]
- id: view_hotel_results
  name: 查看酒店搜索结果列表
  deps: [input_destination_and_dates]
  condition:
    type: juxtaposition
    params:
      ocr:
        all: ["价格", "筛选"]
        any: ["¥", "起", "每晚", "评分", "综合排序", "查看详情", "订"]
      llm:
        prompt: 当前屏幕是否成功展示了符合任务要求的酒店列表，并且清晰地显示了酒店名称、价格（包含'¥'符号）等关键信息？
        expected_true: true
success:
  any_of: [view_hotel_results]
